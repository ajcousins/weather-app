(()=>{"use strict";const e=function(){return{nowTitle:document.querySelector("#nowTitle"),temperatureMain:document.querySelector(".temperatureMain"),symbolMain:document.querySelector(".symbolMain"),nowDescription:document.querySelector("#nowText"),nowTempBar:document.querySelector(".nowTempBar"),searchInput:document.querySelector(".searchBox"),searchSymbol:document.querySelector(".searchSymbol")}};function t(t){t||(t="London"),fetch(`http://api.openweathermap.org/data/2.5/forecast?q=${t}&appid=d096eb4766151c74dfd165b926c9914b&units=metric`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){r.handleData(e)})).catch((function(t){console.log("Error"),e().searchInput.setAttribute("placeholder","Not a valid locaton."),console.error(t)}))}({initialise(){console.log(e().searchInput),e().searchSymbol.addEventListener("click",(()=>{this.search()})),e().searchInput.addEventListener("keypress",(e=>{"Enter"===e.key&&this.search()}))},search(){e().searchInput.value?(r.clearData(),t(e().searchInput.value),e().searchInput.setAttribute("placeholder","Enter a town or city name..."),e().searchInput.value="",e().searchInput.blur()):e().searchInput.blur()}}).initialise(),t();const r={daysArray:[],handleData(t){console.log(t);for(let e=0;e<t.list.length;e++)if("12:00:00"===t.list[e].dt_txt.split(" ")[1]||0===e){const r=new a(t.city.name,t.list[e].dt_txt.split(" ")[1],t.list[e].dt_txt.split(" ")[0],t.list[e].main.temp,t.list[e].weather[0].id,t.list[e].pop,t.list[e].main.humidity,t.list[e].wind.speed,t.list[e].wind.deg,t.list[e].sys.pod,t.list[e].weather[0].description);this.daysArray.push(r)}console.log(this.daysArray),function(){let t=r.daysArray[0].temperature;e().temperatureMain.textContent=`${Math.round(t)}ÂºC`;let a=function(e,t){switch(!0){case 800===e&&"n"===t:return"0-mn";case 800===e:return"0-sn";case 801===e&&"n"===t:return"1-clw";case 801===e:return"1-cls";case 802===e:return"1-clw";case 803===e:case 804===e:return"1-cld";case 300===e:case 301===e:case 310===e:return"2-clr";case 302===e:case e>=311&&e<=314:case 321===e:case e>=520&&e<=522:case 531===e:return"2-clrr";case 500===e&&"n"===t:case 501===e&&"n"===t:return"2-clr";case 500===e:case 501===e:return"2-clrs";case e>=502&&e<=504&&"n"===t:return"2-clrr";case e>=502&&e<=504:return"2-clrrs";case e>=200&&e<=232:return"3-clt";case 511===e:case e>=600&&e<=622:return"4-cls";case e>=701&&e<=781:return"5-mst";default:return null}}(r.daysArray[0].weatherCode,r.daysArray[0].dayNight);e().symbolMain.src=`symbols/${a}.svg`;let n=function(e){let t,r=[];return r.push(`${e.description.charAt(0).toUpperCase()}${e.description.slice(1)} and ${function(e){let t=Math.round(2.237*e);switch(!0){case t<8:return"light winds";case t>7&&t<13:return"a gentle breeze";case t>12&&t<19:return"a moderate breeze";case t>18&&t<24:return"a fresh breeze";case t>23:return"strong winds";default:return""}}(e.windSpeed)}.`),r.push(`Chance of rain: ${Math.round(100*e.probOfPrecip)}%.`),r.push(`Humidity: ${Math.round(e.humidity)}%.`),t=r[0]+"\r\n"+r[1]+"\r\n"+r[2],t}(r.daysArray[0]);e().nowDescription.textContent=n;let c=function(e){const t=[{temp:40,hex:"7f0000"},{temp:39,hex:"930000"},{temp:38,hex:"a80000"},{temp:37,hex:"bc0000"},{temp:36,hex:"d10000"},{temp:35,hex:"e50000"},{temp:34,hex:"e6100b"},{temp:33,hex:"e72016"},{temp:32,hex:"e93022"},{temp:31,hex:"ea402d"},{temp:30,hex:"eb5038"},{temp:29,hex:"ec5536"},{temp:28,hex:"ee5a35"},{temp:27,hex:"ef6033"},{temp:26,hex:"f16532"},{temp:25,hex:"f26a30"},{temp:24,hex:"f3702d"},{temp:23,hex:"f47729"},{temp:22,hex:"f47d26"},{temp:21,hex:"f58422"},{temp:20,hex:"f68a1f"},{temp:19,hex:"f7931d"},{temp:18,hex:"f89c1b"},{temp:17,hex:"f9a41a"},{temp:16,hex:"faad18"},{temp:15,hex:"fbb616"},{temp:14,hex:"f2bd1e"},{temp:13,hex:"eac326"},{temp:12,hex:"e1ca2e"},{temp:11,hex:"d9d036"},{temp:10,hex:"d0d73e"},{temp:9,hex:"c6d54b"},{temp:8,hex:"bcd358"},{temp:7,hex:"b3d166"},{temp:6,hex:"a9cf73"},{temp:5,hex:"9fcd80"},{temp:4,hex:"8fca96"},{temp:3,hex:"80c7ac"},{temp:2,hex:"70c5c1"},{temp:1,hex:"61c2d7"},{temp:0,hex:"51bfed"},{temp:-1,hex:"4dbaea"},{temp:-2,hex:"49b6e6"},{temp:-3,hex:"45b1e3"},{temp:-4,hex:"41acdf"},{temp:-5,hex:"3da8dc"},{temp:-6,hex:"39a3d9"},{temp:-7,hex:"359ed5"},{temp:-8,hex:"319ad2"},{temp:-9,hex:"2d95ce"},{temp:-10,hex:"2a91cb"},{temp:-11,hex:"268cc8"},{temp:-12,hex:"2287c4"},{temp:-13,hex:"1e83c1"},{temp:-14,hex:"1a7ebd"},{temp:-15,hex:"1679ba"},{temp:-16,hex:"1275b7"},{temp:-17,hex:"0e70b3"},{temp:-18,hex:"0a6bb0"},{temp:-19,hex:"0667ac"},{temp:-20,hex:"0262a9"}];for(let r=0;r<t.length;r++){if(e===t[r].temp)return t[r].hex;if(e>40)return t[0].hex;if(e<-20)return t[60].hex}return null}(Math.round(r.daysArray[0].temperature));e().nowTempBar.setAttribute("style",`background-color: #${c}`),e().nowTitle.textContent=`Current weather for ${r.daysArray[0].location}...`}()},clearData(){this.daysArray=[]}};class a{constructor(e,t,r,a,n,c,s,h,i,p,o){this.location=e,this.time=t,this.date=r,this.temperature=a,this.weatherCode=n,this.probOfPrecip=c,this.humidity=s,this.windSpeed=h,this.windDeg=i,this.dayNight=p,this.description=o}}})();