(()=>{"use strict";var e={d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>d});const t=function(){return{background:document.querySelector("html"),nowTitle:document.querySelector("#nowTitle"),temperatureMain:document.querySelector(".temperatureMain"),symbolMain:document.querySelector(".symbolMain"),nowDescription:document.querySelector("#nowText"),nowTempBar:document.querySelector(".nowTempBar"),searchInput:document.querySelector(".searchBox"),searchSymbol:document.querySelector(".searchSymbol"),bars:document.querySelectorAll(".bar"),symbolCard:document.querySelectorAll(".symbolCard"),colourZone:document.querySelectorAll(".colourZone"),tempZone:document.querySelectorAll(".tempZone"),infoZone:document.querySelectorAll(".infoZone"),windDir:document.querySelectorAll(".windDir"),windVal:document.querySelectorAll(".windVal"),rainVal:document.querySelectorAll(".rainVal"),date:document.querySelectorAll(".date"),backgroundMain:document.querySelector("html"),containers:document.querySelectorAll(".screen")}},r=function(e){const t=(r=e.city.timezone/3600,3*Math.round(r/3));var r;const a=[];for(let r=0;r<e.list.length;r++){let n=e.list[r].dt_txt.split(" ")[1];n.split(":")[0];let s=Number(n.split(":")[0])+t;s>=24&&(s-=24),s<0&&(s+=24),a.push(s)}return a},a=function(e){const t=[{temp:40,hex:"7f0000"},{temp:39,hex:"930000"},{temp:38,hex:"a80000"},{temp:37,hex:"bc0000"},{temp:36,hex:"d10000"},{temp:35,hex:"e50000"},{temp:34,hex:"e6100b"},{temp:33,hex:"e72016"},{temp:32,hex:"e93022"},{temp:31,hex:"ea402d"},{temp:30,hex:"eb5038"},{temp:29,hex:"ec5536"},{temp:28,hex:"ee5a35"},{temp:27,hex:"ef6033"},{temp:26,hex:"f16532"},{temp:25,hex:"f26a30"},{temp:24,hex:"f3702d"},{temp:23,hex:"f47729"},{temp:22,hex:"f47d26"},{temp:21,hex:"f58422"},{temp:20,hex:"f68a1f"},{temp:19,hex:"f7931d"},{temp:18,hex:"f89c1b"},{temp:17,hex:"f9a41a"},{temp:16,hex:"faad18"},{temp:15,hex:"fbb616"},{temp:14,hex:"f2bd1e"},{temp:13,hex:"eac326"},{temp:12,hex:"e1ca2e"},{temp:11,hex:"d9d036"},{temp:10,hex:"d0d73e"},{temp:9,hex:"c6d54b"},{temp:8,hex:"bcd358"},{temp:7,hex:"b3d166"},{temp:6,hex:"a9cf73"},{temp:5,hex:"9fcd80"},{temp:4,hex:"8fca96"},{temp:3,hex:"80c7ac"},{temp:2,hex:"70c5c1"},{temp:1,hex:"61c2d7"},{temp:0,hex:"51bfed"},{temp:-1,hex:"4dbaea"},{temp:-2,hex:"49b6e6"},{temp:-3,hex:"45b1e3"},{temp:-4,hex:"41acdf"},{temp:-5,hex:"3da8dc"},{temp:-6,hex:"39a3d9"},{temp:-7,hex:"359ed5"},{temp:-8,hex:"319ad2"},{temp:-9,hex:"2d95ce"},{temp:-10,hex:"2a91cb"},{temp:-11,hex:"268cc8"},{temp:-12,hex:"2287c4"},{temp:-13,hex:"1e83c1"},{temp:-14,hex:"1a7ebd"},{temp:-15,hex:"1679ba"},{temp:-16,hex:"1275b7"},{temp:-17,hex:"0e70b3"},{temp:-18,hex:"0a6bb0"},{temp:-19,hex:"0667ac"},{temp:-20,hex:"0262a9"}];for(let r=0;r<t.length;r++){if(e===t[r].temp)return t[r].hex;if(e>40)return t[0].hex;if(e<-20)return t[60].hex}return null},n=function(e,t){switch(!0){case 800===e&&"n"===t:return"0-mn";case 800===e:return"0-sn";case 801===e&&"n"===t:return"1-clw";case 801===e:return"1-cls";case 802===e:return"1-clw";case 803===e:case 804===e:return"1-cld";case 300===e:case 301===e:case 310===e:return"2-clr";case 302===e:case e>=311&&e<=314:case 321===e:case e>=520&&e<=522:case 531===e:return"2-clrr";case 500===e&&"n"===t:case 501===e&&"n"===t:return"2-clr";case 500===e:case 501===e:return"2-clrs";case e>=502&&e<=504&&"n"===t:return"2-clrr";case e>=502&&e<=504:return"2-clrrs";case e>=200&&e<=232:return"3-clt";case 511===e:case e>=600&&e<=622:return"4-cls";case e>=701&&e<=781:return"5-mst";default:return null}},s=function(){let e=function(e){let t=[],r=[];for(let r=1;r<e.daysArray.length;r++)t.push(e.daysArray[r].temperature);let a=Math.min(...t),n=Math.max(...t),s=125/(n-a);s>40&&(s=40);let c=143-((n*s-a*s+80-80)/2+80);for(let t=1;t<e.daysArray.length;t++){let n=80;n+=Math.round(e.daysArray[t].temperature*s-a*s)+c,r.push(n)}return r}(d);for(let e=0;e<5;e++)t().symbolCard[e].src="symbols/00-dot.svg",t().bars[e].setAttribute("style","height: 80px"),t().colourZone[e].setAttribute("style","background-color: rgba(255, 255, 255, 0.3)");setTimeout((()=>{for(let r=0;r<5;r++)setTimeout((()=>{let s=n(d.daysArray[r+1].weatherCode,d.daysArray[r+1].dayNight);t().symbolCard[r].src=`symbols/${s}.svg`,t().bars[r].setAttribute("style",`height: ${e[r]}px`),t().tempZone[r].textContent=`${Math.round(d.daysArray[r+1].temperature)}ยบ`;let c=a(Math.round(d.daysArray[r+1].temperature));t().colourZone[r].setAttribute("style",`background-color: #${c}`)}),100*(r+1))}),500)},c=function(e){const t=new Date(e),r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],a=t.getDate();let n;switch(!0){case 1===a:case 21===a:case 31===a:n="st";break;case 2===a:case 22===a:n="nd";break;case 3===a:case 23===a:n="rd";break;default:n="th"}return`${r} ${a}${n}`},o=function(e){switch(!0){case e<15:case e>=345:return"06_S";case e>=15&&e<45:return"07_SSW";case e>=45&&e<75:return"08_SWW";case e>=75&&e<105:return"09_W";case e>=105&&e<135:return"10_NWW";case e>=135&&e<165:return"11_NNW";case e>=165&&e<195:return"00_N";case e>=195&&e<225:return"01_NNE";case e>=225&&e<255:return"02_NEE";case e>=255&&e<285:return"03_E";case e>=285&&e<315:return"04_SEE";case e>=315&&e<345:return"05_SSE"}},u=function(){let e=d.daysArray[0].temperature;t().temperatureMain.textContent=`${Math.round(e)}ยบ`;let r=n(d.daysArray[0].weatherCode,d.daysArray[0].dayNight);t().symbolMain.src=`symbols/${r}.svg`;let s=function(e){let t,r=[];return r.push(`${e.description.charAt(0).toUpperCase()}${e.description.slice(1)} and ${function(e){let t=Math.round(2.237*e);switch(!0){case t<8:return"light winds";case t>7&&t<13:return"a gentle breeze";case t>12&&t<19:return"a moderate breeze";case t>18&&t<24:return"a fresh breeze";case t>23:return"strong winds";default:return""}}(e.windSpeed)}.`),r.push(`Chance of rain: ${Math.round(100*e.probOfPrecip)}%`),r.push(`Humidity: ${Math.round(e.humidity)}%`),t=r[0]+"\r\n"+r[1]+"\r\n"+r[2],t}(d.daysArray[0]);t().nowDescription.textContent=s;let c=a(Math.round(d.daysArray[0].temperature));t().nowTempBar.setAttribute("style",`background-color: #${c}`),t().nowTitle.textContent=`Current weather for ${d.daysArray[0].location}...`};function i(e){e||(e="London"),fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=d096eb4766151c74dfd165b926c9914b&units=metric`,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){l.handleData(e)})).catch((function(e){t().searchInput.setAttribute("placeholder","Not a valid locaton."),console.error(e)}))}({initialise(){t().searchSymbol.addEventListener("click",(()=>{this.search()})),t().searchInput.addEventListener("keypress",(e=>{"Enter"===e.key&&this.search()}))},search(){t().searchInput.value?(l.clearData(),i(t().searchInput.value),t().searchInput.setAttribute("placeholder","Enter a town or city name..."),t().searchInput.value="",t().searchInput.blur()):t().searchInput.blur()}}).initialise(),i();const l={daysArray:[],handleData(e){for(let t=0;t<e.list.length;t++)12!==r(e)[t]&&0!==t||this.daysArray.push(this.makeNewDayObj(t,e));5===this.daysArray.length&&this.daysArray.push(this.makeNewDayObj(e.list.length-1,e)),u(),function(){for(let e=0;e<5;e++){s(),t().date[e].textContent=c(d.daysArray[e+1].date);let r=o(d.daysArray[e+1].windDeg);t().windDir[e].src=`wind/${r}.svg`,t().windVal[e].textContent=Math.round(2.237*d.daysArray[e+1].windSpeed),t().rainVal[e].textContent=`${Math.round(100*d.daysArray[e+1].probOfPrecip)}%`}}(),function(){let e=function(e,t,r){switch(!0){case"n"===t:return"night";case e>=800&&e<=801:return"day";case e>=200&&e<=232:case 804===e:return"thickCloud";case e>=300&&e<=321:case e>=502&&e<=531:case r>.8&&"d"===t:return"rain";case 500===e:case 501===e:case 802===e:case 803===e:return"halfCloud";case e>=600&&e<=622:case e>=701&&e<=781:return"white";default:return"day"}}(d.daysArray[0].weatherCode,d.daysArray[0].dayNight,d.daysArray[0].probOfPrecip);t().backgroundMain.className="",t().backgroundMain.classList.add(`${e}`);for(let r=0;r<t().containers.length;r++)"night"===e?t().containers[r].classList.add("lightContainer"):t().containers[r].classList.remove("lightContainer")}()},makeNewDayObj:(e,t)=>new h(t.city.name,t.list[e].dt_txt.split(" ")[1],t.list[e].dt_txt.split(" ")[0],t.list[e].main.temp,t.list[e].weather[0].id,t.list[e].pop,t.list[e].main.humidity,t.list[e].wind.speed,t.list[e].wind.deg,t.list[e].sys.pod,t.list[e].weather[0].description),clearData(){this.daysArray=[]}},d=l;class h{constructor(e,t,r,a,n,s,c,o,u,i,l){this.location=e,this.time=t,this.date=r,this.temperature=a,this.weatherCode=n,this.probOfPrecip=s,this.humidity=c,this.windSpeed=o,this.windDeg=u,this.dayNight=i,this.description=l}}})();